{% extends 'layout.html' %}

{% block pageTitle %}
  Upload a passport style photo of your face
{% endblock %}

{% block outerContent %}
  {{ backLink({
    "href": "javascript:history.go(-1)",
    "text": "Back",
    "classes": "nhsuk-u-margin-top-4 nhsuk-u-margin-bottom-0"
  }) }}
{% endblock %}

{% block content %}


  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-three-quarters">

      <div id="instructions">

        <h1>
          Upload a photo of your face for your smartcard
        </h1>

        <p>If you are issued with a smartcard, the photo you upload will appear on it.</p>

        <p> The photo will also appear on your NHS Care ID profile.</p>

        <div class="nhsuk-do-dont-list nhsuk-u-margin-bottom-4">
          <h2 class="nhsuk-do-dont-list__label">Your photo must:</h2>
          <ul class="nhsuk-list nhsuk-list--tick" role="list">
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              be clear and in focus
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              be taken against a plain, light coloured background
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              show you facing forwards and looking straight at the camera
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              show you with a plain expression and your mouth closed
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              have your head and shoulders visible
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              only include a head covering for religious or medical reasons
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              be appropriate for a work setting
            </li>
          </ul>
          
        </div>

        <div class="nhsuk-grid-row">
          <div class="nhsuk-grid-column-one-third mobile-one-half">
            <figure class="nhsuk-image guideline-photo nhsuk-u-margin-top-2">
              <img class="nhsuk-image__img" src="/images/correct.png" alt="NHS Care ID smartcard">
              <figcaption class="nhsuk-image__caption">
                <ul class="nhsuk-list nhsuk-list--tick nhsuk-u-margin-bottom-0 nhsuk-body-s">
                  <li>
                    <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                      <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
                    </svg>
                    photo that meets guidelines
                  </li>
                </ul>
              </figcaption>
            </figure> 
          </div>
        </div>

        
        <div class="nhsuk-do-dont-list nhsuk-u-margin-bottom-4">
          <h2 class="nhsuk-do-dont-list__label">Your photo must not:</h2>
          <ul class="nhsuk-list nhsuk-list--cross" role="list">
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              contain other people or objects in the background
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              have hair or other objects obscuring your face
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              have any shadows on your face or behind you
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              be edited by photo filters
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              contain sunglasses or tinted glasses
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              be a photo of a physical document, like a passport
            </li>
          </ul>
        </div>

       
        <div class="nhsuk-grid-row">    
          <div class="nhsuk-grid-column-one-third mobile-one-half">
            <figure class="nhsuk-image guideline-photo nhsuk-u-margin-top-2">
              <img class="nhsuk-image__img" src="/images/photo-of-id.png" alt="NHS Care ID smartcard">
              <figcaption class="nhsuk-image__caption">
                <ul class="nhsuk-list nhsuk-list--cross nhsuk-u-margin-bottom-0 nhsuk-body-s">
                  <li>
                    <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                      <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                      <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                    </svg>
                    photo of a physical document
                  </li>
                </ul>
              </figcaption>
            </figure> 
          </div>
          <div class="nhsuk-grid-column-one-third mobile-one-half">
            <figure class="nhsuk-image guideline-photo nhsuk-u-margin-top-2">
              <img class="nhsuk-image__img" src="/images/white-space.png" alt="NHS Care ID smartcard">
              <figcaption class="nhsuk-image__caption">
                <ul class="nhsuk-list nhsuk-list--cross nhsuk-u-margin-bottom-0 nhsuk-body-s">
                  <li>
                    <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                      <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                      <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                    </svg>
                    too much white space
                  </li>
                </ul>
              </figcaption>
            </figure> 
          </div>
          <div class="nhsuk-grid-column-one-third mobile-one-half">
            <figure class="nhsuk-image guideline-photo nhsuk-u-margin-top-2">
              <img class="nhsuk-image__img" src="/images/not-work.png" alt="NHS Care ID smartcard">
              <figcaption class="nhsuk-image__caption">
                <ul class="nhsuk-list nhsuk-list--cross nhsuk-u-margin-bottom-0 nhsuk-body-s">
                  <li>
                    <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                      <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                      <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                    </svg>
                    not suitable for work
                  </li>
                  <li>
                    <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                      <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                      <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                    </svg>
                    wearing sunglasses
                  </li>
                  <li>
                    <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                      <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                      <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                    </svg>
                    objects in the background
                  </li>
                </ul>
              </figcaption>
            </figure> 
          </div>
        </div>


        <h2 class="nhsuk-u-margin-top-5">Upload your photo</h2>

        <label for="cameraFileInputA">
          <span class="nhsuk-button">Choose your photo</span>
          <!-- The hidden file `input` for opening the native camera -->
          <input class="nhsuk-u-visually-hidden"
            id="cameraFileInputA"
            type="file"
            accept="image/*"
          />
        </label>

        <label for="cameraFileInputB">
          <span class="camera-link">Or take a photo using your device's camera</span>

          <!-- The hidden file `input` for opening the native camera -->
          <input class="nhsuk-u-visually-hidden"
            id="cameraFileInputB"
            type="file"
            accept="image/*"
            capture="user"
          />
        </label>

        <div class="no-photo">
          <details class="nhsuk-details" id="no-photo">
            <summary class="nhsuk-details__summary">
              <span class="nhsuk-details__summary-text">
                I do not have a photo ready to upload
              </span>
            </summary>
            <div class="nhsuk-details__text">
              <p>You must take a photo and return to your application to upload it.</p>
              <p>If you cannot take a photo right now, you can use the link in your invite email to return to your application at another time.</p>
          
            </div>
          </details>
        </div>

      </div>
    
    </div>
  </div>

  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">
      
      <div id="edit-image" style="display: none;">

        <h1>Review your photo</h1>     

        <div class="nhsuk-grid-row nhsuk-u-margin-top-6 nhsuk-u-margin-bottom-4" >
          <div class="nhsuk-grid-column-one-half">
            <h2>
              Edit image
            </h2>
            <canvas width="400" height="273" id="edit-canvas" style="border: 1px #d8dde0 solid;">
              Browser doesn't support image editing
            </canvas>
            <p class="nhsuk-body-s nhsuk-u-margin-top-2 nhsuk-u-margin-bottom-2">
              Move: <a href="#01">Left</a> |
              <a href="#02">Right</a> |
              <a href="#03">Up</a> |
              <a href="#04">Down</a> 
            </p>
            <p class="nhsuk-body-s nhsuk-u-margin-top-2 nhsuk-u-margin-bottom-2">
              Zoom: 
              <a href="#05">Reduce</a> |
              <a href="067">Increase</a>
            </p>
            <p class="nhsuk-body-s">
              Rotate:
              <a href="#07">Clockwise</a> |
              <a href="#08">Anticlockwise</a>
            </p>
          </div>
          <div class="nhsuk-grid-column-one-third">
            <h2>
              Preview
            </h2>
            <canvas width="213" height="273" id="preview-canvas" style="border: 1px #d8dde0 solid;">
              Browser doesn't support image editing
            </canvas>
          </div>
        </div> 

        <div class="nhsuk-do-dont-list nhsuk-u-width-three-quarters nhsuk-u-margin-bottom-4">
          <h2 class="nhsuk-do-dont-list__label">Your photo must:</h2>
          <ul class="nhsuk-list nhsuk-list--tick" role="list">
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              be clear and in focus
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              be taken against a plain, light coloured background
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              show you facing forwards and looking straight at the camera
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              show you with a plain expression and your mouth closed
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              have your head and shoulders visible
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              only include a head covering for religious or medical reasons
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
                <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
              </svg>
              be appropriate for a work setting
            </li>
          </ul>   
        </div>
  
        <div class="nhsuk-do-dont-list nhsuk-u-width-three-quarters">
          <h2 class="nhsuk-do-dont-list__label">Your photo must not:</h2>
          <ul class="nhsuk-list nhsuk-list--cross" role="list">
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              contain other people or objects in the background
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              have hair or other objects obscuring your face
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              have any shadows on your face or behind you
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              be edited by photo filters
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              contain sunglasses or tinted glasses
            </li>
            <li>
              <svg class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="34" height="34">
                <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
                <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z" fill="#d5281b"></path>
              </svg>
              be a photo of a physical document, like a passport
            </li>
          </ul>
        </div>

        <form  id="save-image" action="/applicant/v17/step-2/preferred-name" method="post" class="form">

          <div class="nhsuk-form-group">
  
            <fieldset class="nhsuk-fieldset">
              <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--m nhsuk-u-width-three-quarters">
                <h2 class="nhsuk-fieldset__heading">
                  By continuing you confirm that your photo meets the guidelines
                </h2>
              </legend>

              <p class="grey-text nhsuk-u-width-three-quarters">If your photo does not meet the guidelines you may need to complete your application again.</p>
          
              <div class="nhsuk-radios">
          
                <div class="nhsuk-radios__item">
                  <input class="nhsuk-radios__input" id="profile-yes-1" name="profile" type="radio" value="yes" {{ checked("profile", "yes") }}>
                  <label class="nhsuk-label nhsuk-radios__label" for="profile-yes-1">
                    Yes, this photo meets guidelines
                  </label>
                </div>
          
                <div class="nhsuk-radios__item">
                  <input class="nhsuk-radios__input" id="profile-no-1" name="profile" type="radio" value="no" {{ checked("profile", "no") }}>
                  <label class="nhsuk-label nhsuk-radios__label" for="profile-no-1">
                    No, upload a different photo
                  </label>
                </div>
          
              </div>
            </fieldset>
    
    </div>
    

    {{ button({
      "text": "Continue"
    }) }}

        </form>
      </div>

    </div>
  </div>

  <script>
    var instructions = document.getElementById('instructions');
    var editPhoto = document.getElementById('edit-image');

    document
      .getElementById("cameraFileInputA")
      .addEventListener("change", function () {
        editPhoto.style.display = "block";
        instructions.style.display = "none";
        document
          .getElementById("pictureFromCameraA")
          .setAttribute("src", window.URL.createObjectURL(this.files[0]));
      });

      document
      .getElementById("cameraFileInputB")
      .addEventListener("change", function () {
        editPhoto.style.display = "block";
        instructions.style.display = "none";
        document
          .getElementById("pictureFromCameraB")
          .setAttribute("src", window.URL.createObjectURL(this.files[0]));
      });


      var editCanvas = document.getElementById('edit-canvas');
          var previewCanvas = document.getElementById('preview-canvas');
          var ctx1 = editCanvas.getContext('2d');
          var ctx2 = previewCanvas.getContext('2d');

          // Trigger the imageLoader function when a file has been selected
          var fileInput = document.getElementById('cameraFileInputA');
          fileInput.addEventListener('change', imageLoader, false);

          function imageLoader() {
              // $("#image-requirements").css("display", "none"); - Removed as trying out having it show at the top by default
              $("#edit-image").css("display", "block");
              var reader = new FileReader();
              reader.onload = function(event) {
                  img = new Image();
                  img.onload = function(){
                    // document.body.appendChild(img);
                    if (img.width < img.height) {

                      // get the scale
                      var scale = Math.min(editCanvas.width / img.width, editCanvas.height / img.height);
                      // get the top left position of the image
                      var x = (editCanvas.width / 2) - (img.width / 2) * scale;
                      var y = (editCanvas.height / 2) - (img.height / 2) * scale;
                      ctx1.drawImage(img, x, y, img.width * scale, img.height * scale);

                    } else {

                      // get the scale
                      var scale = Math.max(editCanvas.width / img.width, editCanvas.height / img.height);
                      // get the top left position of the image
                      var x = (editCanvas.width / 2) - (img.width / 2) * scale;
                      var y = (editCanvas.height / 2) - (img.height / 2) * scale;
                      ctx1.drawImage(img, x, y, img.width * scale, img.height * scale);

                    }

                    // Outer portrait image edge
                    ctx1.beginPath();
                    ctx1.lineWidth = "4";
                    ctx1.strokeStyle = "red";
                    ctx1.rect(94, 1, 213, 270);
                    ctx1.stroke();

                    // Resize container
                    ctx1.beginPath();
                    ctx1.lineWidth = "4";
                    ctx1.strokeStyle = "red";
                    ctx1.rect(267, 233, 40, 50);
                    ctx1.stroke();

                    // Resize arrow - smaller
                    ctx1.beginPath();
                    ctx1.moveTo(291, 242);
                    ctx1.lineTo(276, 242);
                    ctx1.lineTo(276, 257);
                    ctx1.closePath();
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Resize arrow - larger
                    ctx1.beginPath();
                    ctx1.moveTo(281, 261);
                    ctx1.lineTo(296, 261);
                    ctx1.lineTo(296, 246);
                    ctx1.closePath();
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Directional arrow - top
                    ctx1.beginPath();
                    ctx1.moveTo(190, 100);
                    ctx1.lineTo(210, 100);
                    ctx1.lineTo(200, 90);
                    ctx1.closePath();
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Directional arrow - right
                    ctx1.beginPath();
                    ctx1.moveTo(220, 110);
                    ctx1.lineTo(220, 130);
                    ctx1.lineTo(230, 120);
                    ctx1.closePath();
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Directional arrow - bottom
                    ctx1.beginPath();
                    ctx1.moveTo(190, 140);
                    ctx1.lineTo(210, 140);
                    ctx1.lineTo(200, 150);
                    ctx1.closePath();
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Directional arrow - Left
                    ctx1.beginPath();
                    ctx1.moveTo(180, 110);
                    ctx1.lineTo(180, 130);
                    ctx1.lineTo(170, 120);
                    ctx1.closePath();
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Directional centre point
                    ctx1.beginPath();
                    ctx1.arc(200, 120, 10, 0, 2 * Math.PI, false);
                    ctx1.fillStyle = "red";
                    ctx1.fill();

                    // Face placement guide
                    ctx1.beginPath();
                    ctx1.translate(1, 1);
                    ctx1.scale(0.75, 1);
                    ctx1.arc(265, 120, 80, 0, 2 * Math.PI, false);
                    ctx1.restore(); // restore to original state
                    ctx1.lineWidth = "4";
                    ctx1.strokeStyle = "red";
                    ctx1.stroke();
                    ctx1.strokeStyle = 'rgba(0,0,0,0.0)';

                    // get the scale
                    var scale = Math.max(previewCanvas.width / img.width, previewCanvas.height / img.height);
                    // get the top left position of the image
                    var x = (previewCanvas.width / 2) - (img.width / 2) * scale;
                    var y = (previewCanvas.height / 2) - (img.height / 2) * scale;
                    ctx2.drawImage(img, x, y, img.width * scale, img.height * scale);





                    var cw=editCanvas.width;
                    var ch=editCanvas.height;
                    function reOffset(){
                      var BB=editCanvas.getBoundingClientRect();
                      offsetX=BB.left;
                      offsetY=BB.top;
                    }
                    var offsetX,offsetY;
                    reOffset();
                    window.onscroll=function(e){ reOffset(); }
                    window.onresize=function(e){ reOffset(); }

                    var isDown=false;
                    var startX, startY;

                    var cursors=['default','pointer'];
                    var currentCursor=0;

                    var shapes=[];
                    shapes.push({
                      points:[{x:220,y:85},{x:310,y:85},{x:310,y:155},{x:220,y:155}],
                      cursor:1
                    });
                    shapes.push({
                      points:[{x:355,y:233},{x:407,y:233},{x:407,y:283},{x:355,y:283}],
                      cursor:1
                    });

                    for(var i=0;i<shapes.length;i++){
                      var s=shapes[i];
                      definePath(s.points);
                      ctx1.stroke();
                    }

                    $("#edit-canvas").mousemove(function(e){handleMouseMove(e);});

                    function definePath(p){
                      ctx1.beginPath();
                      ctx1.moveTo(p[0].x,p[0].y);
                      for(var i=1;i<p.length;i++){
                        ctx1.lineTo(p[i].x,p[i].y);
                      }
                      ctx1.closePath();
                    }

                    function handleMouseMove(e){
                      // tell the browser we're handling this event
                      e.preventDefault();
                      e.stopPropagation();

                      mouseX=parseInt(e.clientX-offsetX);
                      mouseY=parseInt(e.clientY-offsetY);

                      // Put your mousemove stuff here
                      var newCursor;
                      for(var i=0;i<shapes.length;i++){
                        var s=shapes[i];
                        definePath(s.points);
                        if(ctx1.isPointInPath(mouseX,mouseY)){
                          newCursor=s.cursor;
                          break;
                        }
                      }
                      if(!newCursor){
                        if(currentCursor>0){
                          currentCursor=0;
                          editCanvas.style.cursor=cursors[currentCursor];
                        }
                      }else if(!newCursor==currentCursor){
                        currentCursor=newCursor;
                        editCanvas.style.cursor=cursors[currentCursor];
                      }
                    }

                  }
                img.src = reader.result;
              }
              reader.readAsDataURL(fileInput.files[0]);
          }

  </script>
{% endblock %}
